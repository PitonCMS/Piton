<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>PitonCMS</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
        <link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        <style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        
        <script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
    </head>
    <body class="vscode-light">
        <h1 id="pitoncms">PitonCMS</h1>
<p>Friendly and Flexible Content Management System</p>
<h2 id="a-designer-forward-cms">A Designer Forward CMS</h2>
<p>PitonCMS was designed to be <em>Designer Forward</em>, giving great flexibility to the designer to build creative websites without requiring additional custom backend development.</p>
<p>Page structures, custom data, settings, are all easily extensible by modifying project JSON <strong>Definition</strong> files. These files can be checked into version control and pushed to other environments to promote layout and data changes without having to modify remote databases or push code.</p>
<p>PitonCMS is built on modern standards and packages:</p>
<ul>
<li>PHP 7.1+</li>
<li>Runs on the <a href="http://www.slimframework.com/">Slim</a> framework, fast and powerful</li>
<li>Coded to PHP-FIG <a href="https://www.php-fig.org/psr/psr-12/">PSR-12</a> standards</li>
<li><a href="https://getcomposer.org/">Composer</a> for package management</li>
<li><a href="https://twig.symfony.com/">Twig</a> to render HTML templates</li>
</ul>
<h2 id="requirements">Requirements</h2>
<ul>
<li>*AMP environment with PHP 7.1 or greater. PitonCMS comes with a <a href="https://docs.docker.com/compose/">Docker-Compose</a> image ready to run for local development</li>
<li><a href="https://getcomposer.org/">Composer</a> installed on your development environment</li>
</ul>
<h2 id="install-pitoncms">Install PitonCMS</h2>
<p>To install PitonCMS using composer from the command line, change directories (<code>cd</code>) to where you want to create your new PitonCMS project directory, and run the composer <code>create-project</code> command, but update <code>&lt;my-project-name&gt;</code> to the new project name:</p>
<pre><code><code><div>composer create-project pitoncms/piton &lt;my-project-name&gt;
</div></code></code></pre>
<p>This will create a new instance of PitonCMS in a folder of the same name. When composer asks if you wish to delete any version control files say yes.</p>
<p>The <code>create-project</code> command will automatically run a post create script that:</p>
<ul>
<li>Updates the Docker Compose YAML files and Apache config files for your project</li>
<li>Copies the <code>config/config.default.php</code> file to <code>config/config.local.php</code>, and sets appropriate local <em>development</em> settings</li>
<li>Updates the project <code>.gitignore</code> file to remove the ignore directive on <code>composer.lock</code> (so you can version control that file for your project)</li>
</ul>
<h2 id="run-pitoncms-in-docker-container">Run PitonCMS in Docker Container</h2>
<p>If you have a <a href="https://docs.docker.com/">Docker</a> client installed on your machine, from the command line <code>cd</code> into the new project folder and run:</p>
<pre><code><code><div>docker-compose build
</div></code></code></pre>
<p>to build the Docker images. This is a one time step.</p>
<p>To start the Docker container and webserver, run:</p>
<pre><code><code><div>docker-compose up -d
</div></code></code></pre>
<p>To later stop your container, run:</p>
<pre><code><code><div>docker-compose stop
</div></code></code></pre>
<p>If you do not have the Docker client, then run PitonCMS on your local *AMP server.</p>
<p>After starting your development server, open a browser and go to <code>http://localhost</code>. The first time you will be directed to the installer script. Enter your name and email address and click submit to build the database and add you as an administrative user.</p>
<p><strong>Note:</strong> The installer script (<code>public/install.php</code>) deletes itself after creating the database. If for some reason the self-delete fails, be sure to manually delete this file. DO NOT commit <code>install.php</code> and/or push to a production environment.</p>
<h2 id="login-to-pitoncms">Login to PitonCMS</h2>
<p>PitonCMS does not store passwords. PitonCMS uses a Passwordless Authentication by Email system.</p>
<p>To login, navigate to <code>/login</code> and enter the email address you used during the install. You will be sent a one-time use hashed token with a login link that is good for five minutes. After logging in, you are welcome to delete the login email.</p>
<p>Sessions are valid for the duration set in the <code>secondsUntilExpiration</code> session configuration item, which defaults to two hours from the last request. This can be increased to any session length.</p>
<h2 id="inside-pitoncms-administration">Inside PitonCMS Administration</h2>
<p>After logging in to the PitonCMS administration back end, go ahead and explore. A good first stop is under the <strong>Tools</strong> menu is to review the client controlled site settings. Also review the <strong>Help</strong> documentation for Designer and Client.</p>
<h2 id="first-project-commit">First Project Commit</h2>
<p>For your project using PitonCMS, before your first commit you should:</p>
<ul>
<li>Make sure that <code>public/install.php</code> has been deleted</li>
<li>Edit <code>.gitignore</code> in the root of the project to remove the ignore on <code>composer.lock</code> (which should have been done as part of the automatic install).</li>
<li>Consider whether to also remove <code>vendor/</code> from <code>.gitignore</code></li>
</ul>
<p>There are various schools of thought on weather to commit <code>vendor</code> folders in your project. If you commit your <code>composer.lock</code> you <em>should</em> be able to install the same critical files by running <code>composer install</code> from the project root on another environment. But committing those same files assures you of maintaining the same file versions as well.</p>
<h2 id="backend-configuration-settings">Backend Configuration Settings</h2>
<p>After installing the project, inspect the <code>config/config.local.php</code> configuration file (which was copied from <code>config.default.php</code> as part of the composer create project step) to ensure the configuration values are set for your environment.</p>
<p>Do not update the <code>config.default.php</code> settings directly, make any desired changes in <code>config.local.php</code> as those override the default file.</p>
<p>For security reasons, <strong>DO NOT</strong> commit <code>config.local.php</code> to your version control system as it holds critical passwords and keys. For any instance of your PitonCMS project, you will need a local  <code>config.local.php</code> file to manage local server settings.</p>
<h3 id="configuration-setting-options">Configuration Setting Options</h3>
<h4 id="production-environment-flag">Production Environment Flag</h4>
<p>The <code>production</code> configuration setting flag should be set for your local environment. If set to <code>true</code> then error details are suppresed and sent to the server logs, not the screen.</p>
<p>When developing a website on PitonCMS with <code>production</code> set to <code>false</code>, the Twig cache will be automatically cleared when templates change, which helps the development process. However, this is not the case when set to <code>true</code>, in that environment the <code>cache/</code> directory will need to be manually cleared when releasing template changes.</p>
<p>This should always be set to <code>true</code> in production.</p>
<pre><code class="language-php"><div><span class="hljs-comment">/**
 * Production
 * Boolean variable controls debug and environment modes
 * Set to false in config.local.php on a development environment.
 */</span>
$config[<span class="hljs-string">'site'</span>][<span class="hljs-string">'production'</span>] = <span class="hljs-keyword">true</span>;
</div></code></pre>
<h4 id="database">Database</h4>
<p>If using Docker for your local development environment the database connection credentials should have been set as part of the install process. For production, enter your production database credentials.</p>
<pre><code class="language-php"><div><span class="hljs-comment">/**
 * Database
 */</span>
$config[<span class="hljs-string">'database'</span>][<span class="hljs-string">'host'</span>] = <span class="hljs-string">'localhost'</span>;
$config[<span class="hljs-string">'database'</span>][<span class="hljs-string">'dbname'</span>] = <span class="hljs-string">''</span>;
$config[<span class="hljs-string">'database'</span>][<span class="hljs-string">'username'</span>] = <span class="hljs-string">''</span>;
$config[<span class="hljs-string">'database'</span>][<span class="hljs-string">'password'</span>] = <span class="hljs-string">''</span>;
</div></code></pre>
<p>If using Docker for your local development environment the session settings should have been set as part of the install process. For production, be sure to set your desired <code>cookieName</code> and a suitably long and complex <code>salt</code> hash.</p>
<h4 id="session">Session</h4>
<pre><code class="language-php"><div><span class="hljs-comment">/**
 * Sessions
 *
 * Set 'salt' to a long hash.
 */</span>
$config[<span class="hljs-string">'session'</span>][<span class="hljs-string">'cookieName'</span>] = <span class="hljs-string">'pitoncms'</span>;
$config[<span class="hljs-string">'session'</span>][<span class="hljs-string">'checkIpAddress'</span>] = <span class="hljs-keyword">true</span>;
$config[<span class="hljs-string">'session'</span>][<span class="hljs-string">'checkUserAgent'</span>] = <span class="hljs-keyword">true</span>;
$config[<span class="hljs-string">'session'</span>][<span class="hljs-string">'salt'</span>] = <span class="hljs-string">''</span>;
$config[<span class="hljs-string">'session'</span>][<span class="hljs-string">'secondsUntilExpiration'</span>] = <span class="hljs-number">7200</span>;
</div></code></pre>
<h4 id="email">Email</h4>
<p>PitonCMS relies by default on your local <code>mail</code> client, but if that is not installed or your local ISP blocks port 25 then add your SMTP credentials.</p>
<pre><code class="language-php"><div><span class="hljs-comment">/**
 * Email
 *
 * from:     Send-from email address
 * protocol: 'mail' (default) or 'smtp'
 *
 * These settings below only apply for SMTP connections
 * smtpHost: SMTP server name
 * smtpUser: User name
 * smtpPass: Password
 * smtpPort: Port to use, likely 465
 */</span>
$config[<span class="hljs-string">'email'</span>][<span class="hljs-string">'from'</span>] = <span class="hljs-string">'pitoncms@localhost.com'</span>;
$config[<span class="hljs-string">'email'</span>][<span class="hljs-string">'protocol'</span>] = <span class="hljs-string">'mail'</span>;
$config[<span class="hljs-string">'email'</span>][<span class="hljs-string">'smtpHost'</span>] = <span class="hljs-string">''</span>;
$config[<span class="hljs-string">'email'</span>][<span class="hljs-string">'smtpUser'</span>] = <span class="hljs-string">''</span>;
$config[<span class="hljs-string">'email'</span>][<span class="hljs-string">'smtpPass'</span>] = <span class="hljs-string">''</span>;
$config[<span class="hljs-string">'email'</span>][<span class="hljs-string">'smtpPort'</span>] = <span class="hljs-string">''</span>;
</div></code></pre>
<h4 id="pagination-links">Pagination Links</h4>
<p>If you have many pages or media files, pagination controls will appear to manage the number of records on screen.</p>
<pre><code class="language-php"><div><span class="hljs-comment">/**
 * Pagination Row Limits
 */</span>
$config[<span class="hljs-string">'pagination'</span>][<span class="hljs-string">'adminPagePagination'</span>][<span class="hljs-string">'resultsPerPage'</span>] = <span class="hljs-number">6</span>;
$config[<span class="hljs-string">'pagination'</span>][<span class="hljs-string">'adminMediaPagination'</span>][<span class="hljs-string">'resultsPerPage'</span>] = <span class="hljs-number">10</span>;
</div></code></pre>
<h2 id="updating-pitoncms">Updating PitonCMS</h2>
<p>The PitonCMS system relies on a vendor package named <code>pitoncms/engine</code> which has nearly all of the PitonCMS code and files. To update the core of PitonCMS, from the command line in the root of your project run:</p>
<pre><code><code><div>composer update pitoncms/engine
</div></code></code></pre>
<p>to get the latest version, and then commit the <code>composer.lock</code> file (and possibly commit the <code>vendor</code> folder).</p>
<p>The PitonCMS frontend project files above the <code>vendor</code> folder are never updated, so your custom files are never touched.</p>

    </body>
    </html>